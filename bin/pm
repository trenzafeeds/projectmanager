#!/bin/bash

# Path to symlink created by install script
exe_path=/usr/local/lib/projectmanager/
username=$(whoami)

case $1 in

    # No arguments
    "")
	echo "-- project manager requires arguments --"
	cat ${exe_path}doc/manual
	exit
	;;

    # Functions

    # Meta utilities
    -c | --config)     # NO SUDO: Uses $username
	if [ -z $2 ]   # 
	then
	    if [ -f "/home/${username}/.config/projectmanager/config.conf" ]
	    then
		echo "Loading config found at ~/.config/projectmanager/config.conf..."
		python2 ${exe_path}bin/config.py /home/${username}/.config/projectmanager/config.conf >\
			${exe_path}.tmp/iconf
	    else
		echo "No config found at ~/.config/projectmanager/config.conf"
		echo "Enter path to config as second argument."
		exit
	    fi
	else
	    echo "Loading config found at ${2}..."
	    python2 ${exe_path}bin/config.py $2 > ${exe_path}.tmp/iconf
	fi
	;;

    # Manual functions
    --dump_config)
	cat ${exe_path}doc/config.conf
	exit
	;;
    
esac

